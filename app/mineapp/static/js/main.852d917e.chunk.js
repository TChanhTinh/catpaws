(this["webpackJsonpcatpaws-app"]=this["webpackJsonpcatpaws-app"]||[]).push([[0],{217:function(e,n,a){e.exports=a(401)},227:function(e,n,a){},249:function(e,n){},251:function(e,n){},262:function(e,n){},264:function(e,n){},291:function(e,n){},293:function(e,n){},294:function(e,n){},300:function(e,n){},302:function(e,n){},320:function(e,n){},323:function(e,n){},339:function(e,n){},342:function(e,n){},345:function(e,n,a){},401:function(e,n,a){"use strict";a.r(n);var t=a(0),c=a.n(t),o=a(8),l=a.n(o),r=a(65),i=(a(227),a(54)),s=a(404),u=a(405),h=a(122),d=a(67),f=a.n(d);function p(e,n,a,t,c){return{type:"ADD_BLOCK",index:e,nonce:n,data:a,prevHash:t,hash:c}}function b(){return function(e){f.a.get("/blockchain").then((function(n){console.log({blocks:n.data}),e({type:"MAKE_CHAIN",chain:{blocks:n.data}})}))}}var v=a(402),m=a(403),k=a(119),E=a.n(k),O={string:"000000000000000000000",complex:5},g=function(e,n){return E()(n+e).toString()},j=(a(345),v.a.Title),x=m.a.TextArea,B=Object(r.b)(null,(function(e){return{setBlock:function(n,a,t,c,o){e(function(e,n,a,t,c){return{type:"SET_BLOCK",index:e,nonce:n,data:a,prevHash:t,hash:c}}(n,a,t,c,o))},addBlock:function(n,a,t,c,o){e(p(n,a,t,c,o))},addBlockToChain:function(n,a,t,c,o){e(function(e,n,a,t,c){return function(o){var l={index:e,nonce:n,data:a,prevhash:t,hash:c};f.a.post("http://localhost:9000/block",l).then((function(e){console.log({blocks:e.data}),o(b())}))}}(n,a,t,c,o))},fetchBlockchain:function(){e(b())}}}))((function(e){var n=e.index,a=e.prevHash,o=e.nonceProps,l=e.dataProps,r=e.fetchBlockchain,d=e.changed,p=Object(t.useState)(l),b=Object(i.a)(p,2),v=b[0],k=b[1],E=Object(t.useState)(o),B=Object(i.a)(E,2),C=B[0],H=B[1],w=Object(t.useState)(""),S=Object(i.a)(w,2),y=S[0],T=S[1],A=Object(t.useState)(!1),D=Object(i.a)(A,2),K=D[0],P=D[1];return Object(t.useEffect)((function(){var e=g(C,n+v+a);T(e),P(function(e){return e.slice(0,O.complex)===O.string.slice(0,O.complex)}(e))}),[C,v,d]),c.a.createElement("div",{className:(K?"block-vaild":"block-unvaild")+" block"},c.a.createElement(s.a,null,c.a.createElement(u.a,{span:6},c.a.createElement(j,{level:4},"Block")),c.a.createElement(u.a,{span:18},c.a.createElement(m.a,{value:n,placeholder:"Block"}))),c.a.createElement(s.a,null,c.a.createElement(u.a,{span:6},c.a.createElement(j,{level:4},"Nonce")),c.a.createElement(u.a,{span:18},c.a.createElement(m.a,{value:C,onChange:function(e){H(e.target.value)},placeholder:"Nonce"}))),c.a.createElement(s.a,null,c.a.createElement(u.a,{span:6},c.a.createElement(j,{level:4},"Data")),c.a.createElement(u.a,{span:18},c.a.createElement(x,{value:v,onChange:function(e){k(e.target.value)},placeholder:"Data"}))),c.a.createElement(s.a,null,c.a.createElement(u.a,{span:6},c.a.createElement(j,{level:4},"PrevHash")),c.a.createElement(u.a,{span:18},c.a.createElement(m.a,{value:a,placeholder:"PrevHash"}))),c.a.createElement(s.a,null,c.a.createElement(u.a,{span:6},c.a.createElement(j,{level:4},"Hash")),c.a.createElement(u.a,{span:18},c.a.createElement(m.a,{value:y,placeholder:"Hash"}))),c.a.createElement(h.a,{onClick:function(){f()({method:"POST",url:"/mining",data:{hash:n+v+a,nonce:0,complexity:O.complex},contentType:"application/json"}).then((function(e){H(e.data.Nonce)})).catch((function(e){console.log(e)}))}},"Mine"),c.a.createElement(h.a,{onClick:function(){return function(){var e={index:n,nonce:C,data:v,prevhash:a,hash:y};f.a.post("/block",e).then((function(e){console.log("called"),r()})).catch((function(e){console.log(e)}))}()}},"Set block"))})),C=Object(r.b)((function(e){var n=e.blockchain;return{blockchain:n[n.length-1].blocks,stateCount:n.length}}),(function(e){return{addBlock:function(){return e(p())},fetchBlockchain:function(){return e(b())}}}))((function(e){var n=e.fetchBlockchain,a=e.blockchain,o=e.stateCount,l=e.addBlock,r=Object(t.useState)(!1),d=Object(i.a)(r,2),f=d[0],p=d[1],b=Object(t.useState)(a),v=Object(i.a)(b,2),m=v[0],k=v[1];return Object(t.useEffect)((function(){p(!f),k(a)}),[o]),Object(t.useLayoutEffect)((function(){n()}),[]),c.a.createElement("div",null,c.a.createElement(s.a,null,m.map((function(e,n){return c.a.createElement(u.a,{span:6},c.a.createElement(B,{index:e.index,nonceProps:e.nonce,dataProps:e.data,prevHash:e.prevhash,changed:f}))})),c.a.createElement(h.a,{onClick:l},"Add block")))}));a(400);var H=function(){return c.a.createElement("div",null,c.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=a(57),S=a(209),y=a(210),T=a(123),A=a(71),D=a(57).combineReducers,K={index:0,nonce:387902,data:"",prevhash:"0",hash:"000004651204ea3016bbba4eb7c7c920d1a4544563d8aca184dcdceb0f8b0f4e"},P=function(e,n){if(0!==e)for(var a=e;a<n.length;a++)n[a].prevHash=n[a-1].hash,n[a].hash=g(n[a].nonce,n[a].index+n[a].data+n[a].prevhash)},_=D({blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[K],n=arguments.length>1?arguments[1]:void 0,a=e[e.length-1];switch(n.type){case"SET_BLOCK":return[].concat(Object(A.a)(e),[Object(T.a)(Object(T.a)({},a),{},{data:n.data,nonce:n.nonce,hash:n.hash})]);default:return e}},blockchain:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{blocks:[]}],n=arguments.length>1?arguments[1]:void 0,a=e[e.length-1];switch(n.type){case"ADD_BLOCK":return[].concat(Object(A.a)(e),[{blocks:[].concat(Object(A.a)(a.blocks),[{index:a.blocks.length+1,nonce:0,data:"",prevhash:a.blocks[a.blocks.length-1].hash,hash:""}])}]);case"SET_BLOCK":return a.blocks[n.index]={index:n.index,nonce:n.nonce,data:n.data,prevhash:n.prevHash,hash:n.hash},P(n.index,a.blocks),[].concat(Object(A.a)(e),[a]);case"MAKE_CHAIN":return[].concat(Object(A.a)(e),[n.chain]);default:return e}}}),L=Object(w.createStore)(_,[{block:{index:0,nonce:0,data:"",prevHash:"0",hash:""},blockchain:{blocks:[{index:0,nonce:0,data:"",prevHash:"0",hash:""}]}}],Object(y.composeWithDevTools)(Object(w.applyMiddleware)(S.a)));l.a.render(c.a.createElement(r.a,{store:L},c.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[217,1,2]]]);
//# sourceMappingURL=main.852d917e.chunk.js.map